generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model raw_constant_violations {
  id             Int       @id @default(autoincrement())
  event_id       Int
  field_name     String    @db.VarChar(255)
  expected_value String    @db.Text
  actual_value   String    @db.Text
  violation_time DateTime? @default(now()) @db.Timestamp(0)

  @@index([event_id], map: "idx_event_id")
  @@index([field_name], map: "idx_field_name")
  @@index([violation_time], map: "idx_violation_time")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model raw_events {
  id                      Int       @id
  created_at              DateTime? @default(now()) @db.Timestamp(0)
  updated_at              DateTime? @default(now()) @db.Timestamp(0)
  last_checked            DateTime? @default(now()) @db.Timestamp(0)
  event_name              String    @db.VarChar(512)
  event_start             String    @db.VarChar(19)
  event_end               String    @db.VarChar(19)
  gmt_start               String    @db.VarChar(19)
  gmt_end                 String    @db.VarChar(19)
  time_booking_start      String    @db.VarChar(19)
  time_booking_end        String    @db.VarChar(19)
  is_all_day_event        Boolean
  timezone_abbreviation   String    @db.VarChar(255)
  building                String    @db.VarChar(255)
  building_id             Int
  room                    String    @db.VarChar(255)
  room_id                 Int
  room_code               String    @db.VarChar(255)
  room_type               String    @db.VarChar(255)
  room_type_id            Int
  location                String    @db.VarChar(255)
  location_link           String    @db.VarChar(255)
  group_name              String    @db.VarChar(255)
  reservation_id          Int
  reservation_summary_url String    @db.VarChar(255)
  status_id               Int
  status_type_id          Int
  web_user_is_owner       Boolean

  @@index([building_id], map: "idx_building_id")
  @@index([event_start, event_end], map: "idx_date_range")
  @@index([event_end], map: "idx_event_end")
  @@index([event_start], map: "idx_event_start")
  @@index([group_name], map: "idx_group_name")
  @@index([building, room], map: "idx_location_search")
  @@index([reservation_id], map: "idx_reservation_id")
  @@index([room_id], map: "idx_room_id")
}

model api_tokens {
  id         Int       @id @default(autoincrement())
  token      String    @unique @db.VarChar(255)
  is_admin   Boolean   @default(false)
  comment    String    @db.VarChar(255)
  created_at DateTime  @default(now()) @db.Timestamp(0)
  last_used  DateTime? @db.Timestamp(0)

  @@index([token], map: "idx_token")
}

model scraper_state {
  id           Int      @id @default(autoincrement())
  scraper_type String   @unique @db.VarChar(50)
  current_date DateTime @db.Date
  updated_at   DateTime @default(now()) @db.Timestamp(0)

  @@index([scraper_type], map: "idx_scraper_type")
}
